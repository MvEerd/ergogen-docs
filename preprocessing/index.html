<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Preprocessing | Ergogen docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://mveerd.github.io/ergogen-docs/preprocessing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Preprocessing | Ergogen docs"><meta data-react-helmet="true" name="description" content="Ergogen does a separate preprocessor pass on the config before starting to interpret it."><meta data-react-helmet="true" property="og:description" content="Ergogen does a separate preprocessor pass on the config before starting to interpret it."><link data-react-helmet="true" rel="shortcut icon" href="/ergogen-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://mveerd.github.io/ergogen-docs/preprocessing"><link data-react-helmet="true" rel="alternate" href="https://mveerd.github.io/ergogen-docs/preprocessing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://mveerd.github.io/ergogen-docs/preprocessing" hreflang="x-default"><link rel="stylesheet" href="/ergogen-docs/assets/css/styles.0c1eb2ef.css">
<link rel="preload" href="/ergogen-docs/assets/js/runtime~main.e3db4af5.js" as="script">
<link rel="preload" href="/ergogen-docs/assets/js/main.6ed62dcc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ergogen-docs/"><img src="/ergogen-docs/img/logo.svg" alt="Ergogen docs logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/ergogen-docs/img/logo.svg" alt="Ergogen docs logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Ergogen docs</b></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/ergogen-docs/">Getting started</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/ergogen-docs/config-overview">Config overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/ergogen-docs/preprocessing">Preprocessing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/ergogen-docs/units">Units</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/ergogen-docs/points">Points</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/ergogen-docs/outlines">Outlines</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/ergogen-docs/cases">Cases</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/ergogen-docs/pcbs">PCBs</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/ergogen-docs/additional-info">Additional info</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="theme-doc-markdown markdown"><header><h1>Preprocessing</h1></header><p>Ergogen does a separate preprocessor pass on the config before starting to interpret it.
This consists of the following steps:</p><ul><li><strong>Unnesting</strong>: any object key containing dots (as in, <code>.</code>s) will be unnested. This allows the use of the so called &quot;dot notation&quot;. For example, <code>nested.key.definition: value</code> will turn into <code>{nested: {key: {definition: value}}}</code> in the preprocessed config object.</li></ul><ul><li><p><strong>Inheritance</strong>: the <code>$extends</code> key can be used in any declaration to inherit values from another declaration. Extension happens according to the following rules:</p><ul><li>if the new value is <code>undefined</code>, the old value will be used as a default;</li><li>if both values are defined (and have the same type), the new one will override the old;</li><li>if both values have different types, the new value will take precedence;</li><li>if the new value is <code>$unset</code>, the resulting value will be <code>undefined</code>, regardless of previous type;</li><li>for arrays or objects, extension is called for each child element recursively.</li></ul><p>The actual value of the <code>$extends</code> key should be the full absolute path of the declaration we wish to inherit from (using the above mentioned, nested &quot;dot notation&quot; if necessary). For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">top</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">parent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">child</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">$extends</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> top.parent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This declaration will lead to <code>child</code> containing all three letter keys: <code>{a: 1, b: 2, c: 3}</code>.</p></li></ul><ul><li><p><strong>Parameterization</strong>: allows regex replacements within declarations. Take the following declaration as a starting point:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">top</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> placeholder</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">double_value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> placeholder * 2</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">$params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">placeholder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">$args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In this case, every occurrence of the value &quot;placeholder&quot; will be replaced with &quot;3&quot;, which allows us to define it only once and still use it in multiple places (kind of like a pseudo-variable).</p></li></ul><ul><li><p><strong>Skipping</strong>: the <code>$skip</code> key can be used anywhere to, well, skip (or &quot;comment out&quot; entire declarations). It can also be useful when combining inheritance and parameterization. For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">grandparent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> placeholder1</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> placeholder2</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">$params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">placeholder1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> placeholder2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">parent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">$extends</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> grandparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">$args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">value1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">child</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">$extends</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">$args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">value2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Here, the grandparent defines two different parameters, but only the child knows both arguments that should be substituted. This would lead to an error at the parent&#x27;s level, because it has two parameters, and only one argument. But, assuming that this is just an intermediary abstract declaration and we wouldn&#x27;t want to use it anyway, we can just declare <code>$skip: true</code>.</p></li></ul><p>The result of the preprocessor is <em>almost</em> just a plain JSON object.
The only semantic difference is how numbers are handled. For example, the value <code>3 * 2</code> would lead to a string type in JSON, but since it&#x27;s a mathematical formula, it can also be interpreted as a number.
Ergogen tries this interpretation for every string value, and if it succeeds, it calculates the results and converts them to JSON numbers.
This syntax also works with variables, which we can use to define units (see below).</p><p>Otherwise, we can begin with the actual keyboard-related layout...</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mveerd/ergogen-docs/edit/main/website/docs/preprocessing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ergogen-docs/config-overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Config overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ergogen-docs/units"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Units Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ergogen-docs/">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Absolem</div><ul class="footer__items"><li class="footer__item"><a href="https://zealot.hu/absolem/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Absolem blogpost</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/nbKcAZB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Ergogen. Built with Docusaurus.</div></div></div></footer></div>
<script src="/ergogen-docs/assets/js/runtime~main.e3db4af5.js"></script>
<script src="/ergogen-docs/assets/js/main.6ed62dcc.js"></script>
</body>
</html>